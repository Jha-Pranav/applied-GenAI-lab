# AUTOGENERATED! DO NOT EDIT! File to edit: ../../nbs/buddy/backend/schemas.ipynb.

# %% auto 0
__all__ = ['ToolCallMode', 'FsReadOperation', 'FsReadParams', 'WriteCommand', 'FsWriteParams', 'ExecuteBashParams',
           'IntrospectParams', 'TodoAction', 'TodoParams', 'ToolCall']

# %% ../../nbs/buddy/backend/schemas.ipynb 1
from pydantic import BaseModel, validator
from typing import List, Dict,Any, Optional, Literal
from enum import Enum

# %% ../../nbs/buddy/backend/schemas.ipynb 2
# fs_read
class ToolCallMode(str, Enum):
    LINE = "Line"
    DIRECTORY = "Directory"
    SEARCH = "Search"

class FsReadOperation(BaseModel):
    mode: ToolCallMode
    path: str
    pattern: Optional[str] = None
    start_line: Optional[int] = 1
    end_line: Optional[int] = -1

class FsReadParams(BaseModel):
    operations: List[FsReadOperation]

# %% ../../nbs/buddy/backend/schemas.ipynb 3
class WriteCommand(str, Enum):
    CREATE = "create"
    STR_REPLACE = "str_replace"
    INSERT = "insert"
    APPEND = "append"
    
class FsWriteParams(BaseModel):
    command: WriteCommand
    path: str
    file_text: Optional[str] = None
    old_str: Optional[str] = None
    new_str: Optional[str] = None
    insert_line: Optional[int] = None
    summary: Optional[str] = None


# %% ../../nbs/buddy/backend/schemas.ipynb 4
class ExecuteBashParams(BaseModel):
    command: str
    summary: Optional[str] = None


# %% ../../nbs/buddy/backend/schemas.ipynb 5
class IntrospectParams(BaseModel):
    query: str

# %% ../../nbs/buddy/backend/schemas.ipynb 6
class TodoAction(str, Enum):
    PLAN = "plan"
    EXECUTE = "execute"
    STATUS = "status"

class TodoParams(BaseModel):
    task: str
    action: TodoAction
    step_id: Optional[int] = None

# %% ../../nbs/buddy/backend/schemas.ipynb 7
class ToolCall(BaseModel):
    name: str
    parameters: Dict[str, Any]

    @validator('parameters')
    def validate_parameters(cls, args, values):
        tool_name = values.get('name')
        
        if tool_name == 'fs_read':
            FsReadParams(**args)
        elif tool_name == 'fs_write':
            FsWriteParams(**args)
        elif tool_name == 'execute_bash':
            ExecuteBashParams(**args)
        elif tool_name == 'introspect':
            IntrospectParams(**args)
        elif tool_name == 'todo':
            TodoParams(**args)
        
        return args
