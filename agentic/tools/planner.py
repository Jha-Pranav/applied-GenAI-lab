# AUTOGENERATED! DO NOT EDIT! File to edit: ../../nbs/buddy/backend/tools/planner/task_planner.ipynb.

# %% auto 0
__all__ = ['PlannerTool']

# %% ../../nbs/buddy/backend/tools/planner/task_planner.ipynb 1
from typing import Dict, Any
from .base import BaseTool, ToolMetadata, ToolCategory

class PlannerTool(BaseTool):
    """Tool wrapper for DynamicTaskExecutor"""
    
    def __init__(self):
        super().__init__(ToolMetadata(
            name="planner",
            description="Intelligent task planning and execution for complex projects",
            category=ToolCategory.INTELLIGENCE
        ))
    
    async def execute(self, request: str) -> Dict[str, Any]:
        """Execute planning and task execution using DynamicTaskExecutor"""
        try:
            import asyncio
            from ..agent.planner.executor import DynamicTaskExecutor
            from ..core.agent import Agent, AgentConfig
            from rich.console import Console
            
            # Create agent for executor
            agent_config = AgentConfig(
                name="PlannerAgent",
                instructions="You are a planning agent that breaks down complex tasks."
            )
            agent = Agent(config=agent_config)
            console = Console()
            
            # Execute planning
            executor = DynamicTaskExecutor(agent, console)
            # result = asyncio.run(executor.execute_project(request))
            result = await executor.execute_project(request)
            
            return {"success": True, "result": result}
            
        except Exception as e:
            return {"success": False, "error": str(e)}
    
    def get_parameters_schema(self) -> Dict[str, Any]:
        return {
            "type": "object",
            "properties": {
                "request": {
                    "type": "string",
                    "description": "The complex project or task to plan and execute"
                }
            },
            "required": ["request"]
        }

