

``` python
from typing import Annotated
from langgraph.graph import START, StateGraph, END
from langgraph.graph.message import add_messages
from IPython.display import Image, display
import gradio as gr
from pydantic import BaseModel
```

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

``` python
class State(BaseModel):
    messages : Annotated[list, add_messages]

    
graph_builder = StateGraph(State)

def our_first_node(old_state: State) -> State:

    reply = f"this is the response from the assistant."
    messages = [{"role": "assistant", "content": reply}]

    new_state = State(messages=messages)

    return new_state

graph_builder.add_node("first_node", our_first_node)
graph_builder.add_edge(START, "first_node")
graph_builder.add_edge("first_node", END)

graph = graph_builder.compile()
# display(Image(graph.get_graph().draw_mermaid_png()))
```

``` python
def chat(user_input: str, history):
    message = {"role": "user", "content": user_input}
    messages = [message]
    state = State(messages=messages)
    result = graph.invoke(state)
    print(result)
    return result["messages"][-1].content


gr.ChatInterface(chat, type="messages").launch(server_port=7860)
```

    OSError: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
    [31m---------------------------------------------------------------------------[39m
    [31mOSError[39m                                   Traceback (most recent call last)
    [36mCell[39m[36m [39m[32mIn[5][39m[32m, line 10[39m
    [32m      6[39m     [38;5;28mprint[39m(result)
    [32m      7[39m     [38;5;28;01mreturn[39;00m result[[33m"[39m[33mmessages[39m[33m"[39m][-[32m1[39m].content
    [32m---> [39m[32m10[39m [43mgr[49m[43m.[49m[43mChatInterface[49m[43m([49m[43mchat[49m[43m,[49m[43m [49m[38;5;28;43mtype[39;49m[43m=[49m[33;43m"[39;49m[33;43mmessages[39;49m[33;43m"[39;49m[43m)[49m[43m.[49m[43mlaunch[49m[43m([49m[43mserver_port[49m[43m=[49m[32;43m7860[39;49m[43m)[49m

    [36mFile [39m[32m~/projects/agentic/.venv/lib/python3.11/site-packages/gradio/blocks.py:2794[39m, in [36mBlocks.launch[39m[34m(self, inline, inbrowser, share, debug, max_threads, auth, auth_message, prevent_thread_lock, show_error, server_name, server_port, height, width, favicon_path, ssl_keyfile, ssl_certfile, ssl_keyfile_password, ssl_verify, quiet, show_api, allowed_paths, blocked_paths, root_path, app_kwargs, state_session_capacity, share_server_address, share_server_protocol, share_server_tls_certificate, auth_dependency, max_file_size, enable_monitoring, strict_cors, node_server_name, node_port, ssr_mode, pwa, mcp_server, _frontend, i18n)[39m
    [32m   2786[39m [38;5;28;01melse[39;00m:
    [32m   2787[39m     [38;5;28;01mfrom[39;00m[38;5;250m [39m[34;01mgradio[39;00m[38;5;250m [39m[38;5;28;01mimport[39;00m http_server
    [32m   2789[39m     (
    [32m   2790[39m         server_name,
    [32m   2791[39m         server_port,
    [32m   2792[39m         local_url,
    [32m   2793[39m         server,
    [32m-> [39m[32m2794[39m     ) = [43mhttp_server[49m[43m.[49m[43mstart_server[49m[43m([49m
    [32m   2795[39m [43m        [49m[43mapp[49m[43m=[49m[38;5;28;43mself[39;49m[43m.[49m[43mapp[49m[43m,[49m
    [32m   2796[39m [43m        [49m[43mserver_name[49m[43m=[49m[43mserver_name[49m[43m,[49m
    [32m   2797[39m [43m        [49m[43mserver_port[49m[43m=[49m[43mserver_port[49m[43m,[49m
    [32m   2798[39m [43m        [49m[43mssl_keyfile[49m[43m=[49m[43mssl_keyfile[49m[43m,[49m
    [32m   2799[39m [43m        [49m[43mssl_certfile[49m[43m=[49m[43mssl_certfile[49m[43m,[49m
    [32m   2800[39m [43m        [49m[43mssl_keyfile_password[49m[43m=[49m[43mssl_keyfile_password[49m[43m,[49m
    [32m   2801[39m [43m    [49m[43m)[49m
    [32m   2802[39m [38;5;28mself[39m.server_name = server_name
    [32m   2803[39m [38;5;28mself[39m.local_url = local_url

    [36mFile [39m[32m~/projects/agentic/.venv/lib/python3.11/site-packages/gradio/http_server.py:157[39m, in [36mstart_server[39m[34m(app, server_name, server_port, ssl_keyfile, ssl_certfile, ssl_keyfile_password)[39m
    [32m    155[39m         [38;5;28;01mpass[39;00m
    [32m    156[39m [38;5;28;01melse[39;00m:
    [32m--> [39m[32m157[39m     [38;5;28;01mraise[39;00m [38;5;167;01mOSError[39;00m(
    [32m    158[39m         [33mf[39m[33m"[39m[33mCannot find empty port in range: [39m[38;5;132;01m{[39;00m[38;5;28mmin[39m(server_ports)[38;5;132;01m}[39;00m[33m-[39m[38;5;132;01m{[39;00m[38;5;28mmax[39m(server_ports)[38;5;132;01m}[39;00m[33m. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.[39m[33m"[39m
    [32m    159[39m     )
    [32m    161[39m [38;5;28;01mif[39;00m ssl_keyfile [38;5;129;01mis[39;00m [38;5;129;01mnot[39;00m [38;5;28;01mNone[39;00m:
    [32m    162[39m     path_to_local_server = [33mf[39m[33m"[39m[33mhttps://[39m[38;5;132;01m{[39;00murl_host_name[38;5;132;01m}[39;00m[33m:[39m[38;5;132;01m{[39;00mport[38;5;132;01m}[39;00m[33m/[39m[33m"[39m

    [31mOSError[39m: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.

``` python
Image()
```

    ValueError: No image data found. Expecting filename, url, or data.
    [31m---------------------------------------------------------------------------[39m
    [31mValueError[39m                                Traceback (most recent call last)
    [36mCell[39m[36m [39m[32mIn[4][39m[32m, line 1[39m
    [32m----> [39m[32m1[39m [43mImage[49m[43m([49m[43m)[49m

    [36mFile [39m[32m~/.cache/uv/archive-v0/QpkwR1VM8d_gvLn8bP848/lib/python3.11/site-packages/IPython/core/display.py:972[39m, in [36mImage.__init__[39m[34m(self, data, url, filename, format, embed, width, height, retina, unconfined, metadata, alt)[39m
    [32m    970[39m     ext = [38;5;28mself[39m._find_ext(url)
    [32m    971[39m [38;5;28;01melif[39;00m data [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:
    [32m--> [39m[32m972[39m     [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m([33m"[39m[33mNo image data found. Expecting filename, url, or data.[39m[33m"[39m)
    [32m    973[39m [38;5;28;01melif[39;00m [38;5;28misinstance[39m(data, [38;5;28mstr[39m) [38;5;129;01mand[39;00m (
    [32m    974[39m     data.startswith([33m'[39m[33mhttp[39m[33m'[39m) [38;5;129;01mor[39;00m _safe_exists(data)
    [32m    975[39m ):
    [32m    976[39m     ext = [38;5;28mself[39m._find_ext(data)

    [31mValueError[39m: No image data found. Expecting filename, url, or data.
